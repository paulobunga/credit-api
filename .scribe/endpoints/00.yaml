name: 'Deposit API'
description: |-

  Before using API, make sure you have an merchant acount.
endpoints:
  -
    httpMethods:
      - GET
    uri: deposits
    metadata:
      title: 'Get deposit list'
      description: 'This endpoint lets you get deposit list.'
      authenticated: true
    headers:
      Api-Version: v1
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    queryParameters:
      uuid:
        name: uuid
        description: 'The Merchant UUID.'
        required: true
        example: 224d4a1f-6fc5-4039-bd81-fcbc7f88c659
        type: string
      sign:
        name: sign
        description: Signature.
        required: true
        example: e38c3a02a3d9757c912d0dc6240a5c88
        type: string
    bodyParameters: []
    responses:
      -
        status: 200
        content: '{"data":[{"name":"Test Merchant","order_id":"YIHT1@PfHXEEVIqt","merchant_order_id":"9798223690986","amount":"1000.0000","status":2,"callback_url":"jenkins.com\/quia"}],"meta":{"pagination":{"total":2,"count":1,"per_page":1,"current_page":1,"total_pages":2,"links":{"next":"\/?page=2"}}}}'
        headers: []
        description: null
      -
        status: 200
        content: |-
          {
               "data": [],
               "meta": {
                   "pagination": {
                       "total": 0,
                       "count": 0,
                       "per_page": 10,
                       "current_page": 1,
                       "total_pages": 1,
                       "links": {},
                       "sortBy": "id",
                       "descending": false
                   }
               }
          }
        headers: []
        description: '200, empty record'
    responseFields: []
  -
    httpMethods:
      - POST
    uri: deposits
    metadata:
      title: 'Create a deposit'
      description: 'This endpoint lets you create a deposit.'
      authenticated: true
    headers:
      Api-Version: v1
      Content-Type: application/json
      Accept: application/json
    urlParameters: []
    queryParameters: []
    bodyParameters:
      merchant_order_id:
        name: merchant_order_id
        description: 'The order id created by merchant.'
        required: true
        example: '9798223690986'
        type: string
      currency:
        name: currency
        description: 'The currency of the deposit.'
        required: true
        example: VND
        type: string
      channel:
        name: channel
        description: 'Payment Channel of the deposit.'
        required: true
        example: MOMOPAY
        type: string
      method:
        name: method
        description: 'Payment method supported by selected Payment channel.'
        required: true
        example: TEXT
        type: string
      uuid:
        name: uuid
        description: 'The Merchant UUID.'
        required: true
        example: 224d4a1f-6fc5-4039-bd81-fcbc7f88c659
        type: string
      sign:
        name: sign
        description: Signature.
        required: true
        example: d72b7a2c1fda1b4914354e6c5dbb0038
        type: string
      amount:
        name: amount
        description: 'Amount of the deposit.'
        required: true
        example: '1000'
        type: string
      callback_url:
        name: callback_url
        description: |-
          Callback URL of the deposit,
          if not set, it would be the setting in merchant panel.
        required: false
        example: 'http://callback.url/0001'
        type: url
    responses:
      -
        status: 200
        content: '{"data":{"name":"Test Merchant","order_id":"YIHT1@PfHXEEVIqt","merchant_order_id":"9798223690986","amount":"1000.0000","status":2,"callback_url":"jenkins.com\/quia"}}'
        headers: []
        description: null
      -
        status: 422
        content: |-
          {
               "message": "The merchant order id has already been taken.",
               "errors": {
                   "merchant_order_id": [
                       "The merchant order id has already been taken."
                   ]
               }
          }
        headers: []
        description: '422, parameter error'
    responseFields: []
  -
    httpMethods:
      - GET
    uri: 'deposits/{id}'
    metadata:
      title: 'Get a deposit'
      description: 'This endpoint lets you get a deposit.'
      authenticated: true
    headers:
      Api-Version: v1
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      id:
        name: id
        description: 'The Merchant Order ID of the deposit.'
        required: true
        example: '9798223690986'
        type: string
    queryParameters:
      uuid:
        name: uuid
        description: 'The Merchant UUID.'
        required: true
        example: 224d4a1f-6fc5-4039-bd81-fcbc7f88c659
        type: string
      sign:
        name: sign
        description: Signature.
        required: true
        example: e38c3a02a3d9757c912d0dc6240a5c88
        type: string
    bodyParameters: []
    responses:
      -
        status: 200
        content: '{"data":{"name":"Test Merchant","order_id":"YIHT1@PfHXEEVIqt","merchant_order_id":"9798223690986","amount":"1000.0000","status":2,"callback_url":"jenkins.com\/quia"}}'
        headers: []
        description: null
      -
        status: 404
        content: '{"message": "No query results for model [App\\Models\\MerchantDeposit]."}'
        headers: []
        description: '404, not found'
    responseFields: []
